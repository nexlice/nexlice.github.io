---
title: Consensus Algorithms
tags: 
 - public
 - private
 - consortium
 - liveness
 - safety
 - pow
 - pos
 - dpos
 - dpoet
 - pbft
 - poa
 - paxos
 - raft
 - sieve

---

> 본 글은 Codestates BEB 코스의 자료에서 내용을 가져와 작성하였음을 알립니다.  

# Consensus Algorithms

---

## READ ME
합의 프로토콜은 Safety와 Liveness를 모두 만족시켜야 한다.  

> **Liveness over Safety**  
> - 잘못된 합의가 이루어질 수 있지만 어떻게든 합의는 한다.
>   - 예시) 블록체인 PoW: 51% 공격 발생 가능성. Safety는 보장하지 않음
> <br>
> **Safety over Liveness**  
> - 잘못될 가능성이 있다면 블록을 만들지 않는다.
>   - 예시) 코스모스 텐더민트: 메시지가 시간 안에 도착하지 않으면 블록 생성 안 함

---

## Criteria
합의 알고리즘(Consensus Algorithm)이란, 다수의 참여자가 통일된 의사결정을 하기 위해 사용하는 알고리즘을 말하며,  
합의 모델, 합의 방식, 합의 메커니즘 또는 합의 프로토콜이라고도 한다.  
<br>
블록체인 시스템의 경우 네트워크에 참여하는 모든 참여자가 동일한 데이터를 복사하여 분산 저장하기 때문에,  
원본과 사본의 구별이 없으며, 통일된 의사결정을 내릴 수 있는 권위 있는 중앙(Center)이 존재하지 않는다.  
이런 상황에서 합리적이고 효율적인 의사결정을 내릴 수 있는 다양한 알고리즘이 개발되었다.  
<br>
합의 알고리즘에서는 다음의 세 가지를 고려해야 한다.  
> (이외에도 고려해야 할 게 많지만, 다음의 세 가지는 공통으로 고려되는 사항입니다)

- Finality Problem (완결성 문제)
- 51% Attack/BTF (51% 공격과 비잔틴 결함)
- Transaction Cost (트랜잭션 수수료)

---

## Types with Pros and Cons
이전에 합의 알고리즘을 학습하며 제공된 장단점 표이다.  
이 표를 보며 합의 알고리즘에서 고려해야 하는 세 가지 사항을 염두에 두며, 각 알고리즘의 특징을 알아보자.  
<br>

|체인 공개 유형|합의 방식|설명|장점|단점|사용 코인|	 
|:---:|:---:|:---:|:---:|:---:|:---:|
|퍼블릭 비허가형<br>공개형|작업 증명 Pow|각 노드의 연산 능력을 증명하여 블록 생성<br>높은 컴퓨팅 파워를 가진 노드가 블록을 생성할 확률이 높음<br>오랫동안 사용되며 안전성이 검증되었지만, 단점도 많이 도출|	오랫동안 검증됨|51% Attack<br>완결성 문제<br>느린 트랜잭션<br>에너지 낭비|비트코인|  
||지분 증명<br>PoS|소유 지분 양에 비례하여 블록 생성 권한을 높은 확률로 부여받음<br>많은 지분을 가진 노드가 블록을 생성할 확률 높음.<br>이론적으로 우수하지만, 실제 대규모 환경에서 검증 사례가 부족|51% Attack 내성<br>빠른 트랜잭션<br>에너지 낭비 적음|완결성 문제 검증 부족|퀀텀<br>네오<br>스트라디스|  
||위임 지분 증명<br>DPoS|일부 위임된 Validator끼리 PoS 수행 트랜잭션 속도가 더 빠름.<br>신뢰도는 Validator의 신뢰도에 종속|빠른 트랜잭션<br>에너지 낭비 적음|완전성 문제 검증 부족<br>탈중앙성 부족<br>보안 취약|	스팀<br>이오스<br>아크<br>라이즈|  
||경과 시간 증명<br>PoET|경쟁적 연산으로 낭비되는 에너지를 줄이면서 작업 증명과 유사 효과 <br>하이퍼레저 쏘투스 레이크(Sawtooth Lake)에서 제안<br>인텔 SGX를 기반으로 블록을 생성하는 리더를 랜덤으로 선정|검증된 방법의 개선<br>에너지 낭비 적음|특정 HW 종속|쏘투스|  
|프라이빗 허가형<br>컨소시엄|PBFT|참가자 1명이 프라이머리(리더)가 되어 모든 참가자에게 요청 송신<br>그 요청에 대한 결과를 집계한 뒤 다수의 값을 사용해 블록을 확정<br>각 노드는 브로드캐스팅된 명령을 받게 되면 모든 노드에 회신<br>각 노드는 명령을 일정 수 이상 수신하면 명령을 실행하고 블록을 등록|완결성 문제 해결<br>빠른 트랜잭션|참여자 사전 파악 필요<br>참가자 증가 시 성능 하락|패브릭|  
||권한 증명<br>PoA|트랜잭션 및 블록의 Validator라고 승인된 계정에 의해 유효성 검사<br>Validator의 권리를 얻으므로 그들이 얻은 지위를 유지하고자 함<br>자신의 신원에 부정적 평판이 생기길 원치 않도록 노력할 거라 가정|  			
||PAXOS|트랜잭션 및 블록의 Validator라고 승인된 계정에 의해 유효성 검사<br>Validator가 될 수 있는 권리를 얻으므로 그들이 얻은 지위를 유지하고자 함<br>자신의 신원에 부정적인 평판이 생기길 원치 않도록 노력할 것이라 가정|	  
||RAFT|리더를 선정한 후 시스템의 모든 변화는 리더를 통해 결정 신뢰된 네트워크에서만 사용||리더의 조작 가능<br>BTF 보장하지 않음|  	
||Sieve|IBM에서 고안한 PBFT 확장 알고리즘<br>실행 결과 전송과 집계 결과 전송으로 흐름이 나뉜다.|  
