bitcoin-block-structure-10

난이도 및 논스 추가
Block Hash
블록의 식별자 역할을 하는 블록 해시는 6가지의 블록 헤더 정보를 입력값으로 하고, 여기에 SHA256 해시 함수를 2회 적용해서 계산되는 값으로, 32바이트의 숫자 값입니다. 이름은 블록 해시이지만, 실제로는 그 값은 블록 전체를 해시한 값이 아니라 블록 헤더를 해시한 값입니다.

지금까지의 내용을 바탕으로 블록 해시를 구하는 과정을 그림으로 나타내면 다음과 같습니다.

![block-hash]()  
[노드 & 난이도 및 논스 추가-그림. 1] 블록 해시를 구하는 과정


거래 정보의 해시값은 해당 거래가 포함된 블록의 머클 해시 계산에 입력값으로 사용되고, 머클 해시는 블록 해시의 계산에 입력값으로 사용됩니다. 블록 해시는 다음 블록(A라 하면)의 직전 블록의 해시(previous block hash) 값으로 저장되며, 직전 블록의 해시는 A 블록의 블록 헤더 정보로서, A 블록의 블록 해시를 계산하는 데 입력값으로 사용됩니다.

따라서, 거래 정보가 변경되면 머클 해시가 변경되고, 머클 해시가 변경되면 블록 해시가 변경되고, 블록 해시의 변경은 다음 블록의 블록 해시 변경으로 연쇄적으로 이어지게 됩니다. 그리고 블록 해시는 작업 증명의 해답(논스값)을 찾아내야 구할 수 있으므로, 거래 정보를 변경한 블록부터 그 이후의 모든 블록을 순서대로 다시 채굴해야 해야 합니다.

블록 하나 채굴하는데 평균 10분이 소요되고, 2016-01-23 기준 총 블록 수가 약 40만 블록이므로, 최초의 원조 블록인 Genesis 블록에 포함된 거래를 변경하면 약 400만 분, 약 7.6년의 시간이 소요됩니다.
물론 그 7.6년의 시간 동안에도 새로운 블록들도 평균 10분마다 하나씩 계속 생성되므로 이를 모두 뒤집는 것은 사실상 불가능한 것입니다.

정리하자면, 완료된 거래 정보를 변경하려면, 변경하려는 거래 정보가 포함된 블록부터 그 이후의 모든 블록을 순서대로 다시 채굴해야 합니다. 이 작업은 많은 시간이 소요되고, 작업이 진행되는 동안에도 다른 노드들에 의해 블록이 계속 추가되므로, 완료된 거래 정보의 변경은 현실적으로 불가능합니다.

