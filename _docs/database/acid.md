---
title: ACID
tags: 
 - Transaction
 - Atomicity
 - Consistency
 - Isolation
 - Durability

description: Learn about the Concept of ACID!
---

> 본 글은 Codestates BEB 코스의 자료에서 내용을 가져와 작성하였음을 알립니다.  

<!-- {% include alert.html type="danger" title="Warning!" content="이 문서는 아직 미완성 문서입니다." %} -->

# ACID
`ACID`는 데이터베이스 내에서 일어나는 하나의 트랜잭션의 안전성을 보장하기 위해 필요한 성질이다.  
각 이니셜의 뜻은 다음과 같다.  

- Atomicity
- Consistency
- Isolation
- Durability  

---  

## Transaction
트랜잭션이란, 여러 개의 작업을 하나로 묶은 실행 유닛이다.  
각 트랜잭션은 하나의 특정 작업으로 시작하여, 묶여 있는 모든 작업을 다 완료해야 정상적으로 종료한다.  
만약 하나의 트랜잭션에 속해있는 여러 작업 중에서 단 하나의 작업이라도 실패한다면,  
이 트랜잭션에 속한 모든 작업(atomic)을 실패한 것으로 판단한다.  
<br>  

성공, 또는 실패라는 두 개의 결과만 존재하는 트랜잭션은, 미완료된 작업 없이 모든 작업을 성공해야 한다.  
데이터베이스 트랜잭션은 `ACID`라는 특성이 있다.  

---  

## Atomicity
원자성은 하나의 트랜잭션에 속해있는 모든 작업이 **전부 성공하거나, 전부 실패해서** 결과를 예측할 수 있어야 한다.  
하나의 단위가 묶여있는 여러 작업이 부분적으로 실행된다면, 데이터가 오염될 수 있다.  
<br>  

갑 계좌에서 인출하여 을 계좌에 입금하는 트랜잭션이 있다고 하자.  
만약 인출에 성공하고 입금에 실패했을 때 문제를 파악할 수 없다면,  
갑의 인출된 돈은 세상에서 사라지는 돈이 된다.  
갑에서 출금하는 작업을 포함하여 모든 작업이 실패로 돌아가야 한다는 점이 Atomicity(원자성)이다.  
<br>  

SQL에서 특정 쿼리를 실행헀는데 부분적으로 실패하는 부분이 있다면, 전부 실패하도록 구현되어 있다.  
이때 충돌 요인에 대해 선택지를 제공한다.  

---  

## Consistency
데이터베이스의 상태는 항상 일관성을 유지해야한다.  
즉, 하나의 트랜잭션 이전과 이후, **데이터베이스의 상태는 이전과 같이 유효해야 한다.**  
트랜잭션이 일어난 이후의 데이터베이스는 데이터베이스의 제약이나 규칙을 만족해야한다.  
<br>  

예를 들어 '모든 고객은 반드시 이름을 가지고 있어야 한다'는 데이터베이스의 제약이 있다고 하자.  
이때, 다음과 같은 트랜잭션은 일관성을 위반한다.  

- 이름 없는 새로운 고객을 추가하는 쿼리
- 기존 고객의 이름을 삭제하는 쿼리  

데이터베이스의 유요한 상태는 각기 다를 수 있지만, 데이터의 상태에 대한 일관성은 변하지 않아야 한다.  

---  

## Isolation
격리성 (또는 고립성)은 **모든 트랜잭션은 다른 트랜잭션으로부터 독립되어야 한다**라는 뜻이다.  
실제로 동시에 여러 개의 트랜잭션들이 수행될 떄, 각 트랜젝션은 고립(격리)되어 있어, 연속으로 실행된 것과 동일한 결과를 나타낸다.  
<br>  

예를 들어 갑의 계정에 만원이 있다고 가정해보자.  
이 계좌로부터 을의 계좌로 6천 원을, 병의 계좌로 6천 원을 동시에 계좌 이체하는 경우,  
계을 계좌로 먼저 송금한 뒤, 병 계좌에 보내는 결과에 동일해야 한다.  
<br>  

격리성을 지키는 각 트랜젝션은 철저히 독립적이기 때문에, 다른 트랜젝션의 작업 내용을 **알 수 없다**.  

---  

## Durability
지속성은 하나의 트랜잭션이 성공적으로 수행되었다면, 해당 트랜잭션에 대한 로그가 남아야 하고,  
런타임 오류나 시스템 오류가 발생하더라도, **해당 기록은 영구적**이어야 한다는 뜻이다.  
<br>  

은행에서 계좌이체를 성공적으로 실행한 이후에, 해당 은행 데이터베이스에 오류가 발생하여 은행 어플리케이션이 종료되더라도,  
계좌 이체 내역은 기록으로 남아야 한다.  